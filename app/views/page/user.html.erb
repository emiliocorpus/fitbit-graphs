<% if @data_set[:selected] === nil %>
	<% label = 'calories' %>
<% else  %>
	<% label = @data_set[:selected] %>
<% end %>

<script src="/assets/Chart.js"></script>
<div class="text-center graphs-page">
	<div class="btn-group btn-group-justified" role="group" aria-label="...">
		<%case @data_set[:selected]  %>
		<%when 'calories'  %>
			<%= link_to 'Calories', {:controller => 'page', :action => 'user', :request => 'calories'}, :role=>'button', :class =>"disabled btn btn-info"%>
			<%= link_to 'Steps', {:controller => 'page', :action => 'user',:request => 'steps'}, :role=>'button', :class =>"btn btn-primary"%>
			<%= link_to 'Badges', {:controller => 'page', :action => 'user', :request => 'badges'}, :role=>'button',:class =>"btn btn-primary"%>
		<% when 'badges' %>
			<%= link_to 'Calories', {:controller => 'page', :action => 'user', :request => 'calories'}, :role=>'button',:class =>"btn btn-primary"%>
			<%= link_to 'Steps', {:controller => 'page', :action => 'user',:request => 'steps'}, :role=>'button', :class =>"btn btn-primary"%>
			<%= link_to 'Badges', {:controller => 'page', :action => 'user', :request => 'badges'}, :role=>'button',:class =>"disabled btn btn-info"%>
		<% when 'steps' %>
			<%= link_to 'Calories', {:controller => 'page', :action => 'user', :request => 'calories'}, :role=>'button',:class =>"btn btn-primary"%>
			<%= link_to 'Steps', {:controller => 'page', :action => 'user',:request => 'steps'}, :role=>'button', :class =>"disabled btn btn-info"%>
			<%= link_to 'Badges', {:controller => 'page', :action => 'user', :request => 'badges'}, :role=>'button',:class =>"btn btn-primary"%>
		<% else %>
			<%= link_to 'Calories', {:controller => 'page', :action => 'user', :request => 'calories'}, :role=>'button',:class =>"disabled btn btn-info"%>
			<%= link_to 'Steps', {:controller => 'page', :action => 'user',:request => 'steps'}, :role=>'button', :class =>"btn btn-primary"%>
			<%= link_to 'Badges', {:controller => 'page', :action => 'user', :request => 'badges'}, :role=>'button',:class =>"btn btn-primary"%>
		<% end %>
	</div>
	<%if label === 'badges' %>
		<div class="badges">
			<% @data_set[:badges]["badges"].each do |badge| %>
				<%= image_tag badge['image100px'], class: 'badge-pic', title: badge['name'] %>
			<% end %>
		</div>
	<% else %>
		<canvas id="myChart"></canvas>
		<script>
			var ctx = document.getElementById("myChart");
			var jsLabels = []
			for (var i = 1; i <= <%= @data_set[:days] %>; i++) {
				jsLabels.push(i.toString())
			}
			var data = {
			    labels: jsLabels,
			    datasets: [
			        {
			            label: "<%= label %>",
			            fill: false,
			            lineTension: 0.1,
			            backgroundColor: "rgba(75,192,192,0.4)",
			            borderColor: "rgba(75,192,192,1)",
			            borderCapStyle: 'butt',
			            borderDash: [],
			            borderDashOffset: 0.0,
			            borderJoinStyle: 'miter',
			            pointBorderColor: "rgba(75,192,192,1)",
			            pointBackgroundColor: "#fff",
			            pointBorderWidth: 1,
			            pointHoverRadius: 10,
			            pointHoverBackgroundColor: "rgba(75,192,192,1)",
			            pointHoverBorderColor: "rgba(220,220,220,1)",
			            pointHoverBorderWidth: 2,
			            pointRadius: 1,
			            pointHitRadius: 10,
			            data: <%= @data_set[:values] %>
			        }
			    ]
			};
		    var myChart = new Chart(ctx, {
		        type: 'line',
		        data:  data,
		        options: {
		        	scales: {
		        	    xAxes: [{
		        	      scaleLabel: {
		        	        display: true,
		        	        labelString: 'Time (days)'
		        	      }
		        	    }]
		            }
		    	}}
		    );
		</script>
	<% end %>
</div>



